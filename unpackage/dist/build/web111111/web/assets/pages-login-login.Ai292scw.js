import{r as e,o as l,w as a,c as t,a as s,i as o,b as A,d as n,e as u,t as c,s as r,h as d,f as i,g,j as p,I as v,k as m,l as w}from"./index-CdjZ-dJ0.js";import{_ as f,s as b,l as S}from"./_plugin-vue_export-helper.BPaGh74C.js";const h=f({__name:"login",setup(f){const h=e(""),k=e(""),K=e(!1),x=e(60);let y=null;const B=(e,l="none")=>{w({title:e,icon:l})},E=async()=>{if(!/^[1][3-9][0-9]{9}$/.test(h.value))return B("手机号格式不正确");r({title:"发送中..."});try{await b(h.value),K.value=!0,I(),B("验证码发送成功","success")}catch(e){B("发送验证码失败，请重试","error"),console.error("发送验证码错误:",e)}finally{d()}},I=()=>{x.value=60,clearInterval(y),y=setInterval((()=>{x.value>0?x.value--:(clearInterval(y),K.value=!1)}),1e3)},C=async()=>{if(!k.value)return B("请输入验证码");r({title:"登录中..."});try{const e=await S({mobile:h.value,captcha:k.value});console.log("登录响应：",e);const l=e;l&&(localStorage.setItem("token",l),localStorage.setItem("mobile",h.value)),B("登录成功","success"),i({url:"/pages/index/index"})}catch(e){B("登录失败，请重试","error"),console.error("登录错误:",e)}finally{d()}};return l((()=>{const e=new URL(window.location.href);console.log(e);const l=new URLSearchParams(e.search);console.log(l);const a=l.get("param");console.log(a),localStorage.setItem("param",a)})),a(K,(e=>{e||clearInterval(y)})),(e,l)=>{const a=g,r=p,d=o,i=v,w=m;return A(),t(d,{class:"login-container"},{default:s((()=>[n(a,{style:{"font-size":"30px",padding:"186px 0px 52px","font-weight":"bold"}},{default:s((()=>[u("登录")])),_:1}),n(d,{class:"input-group"},{default:s((()=>[n(d,{style:{display:"flex","align-items":"center",gap:"5px"}},{default:s((()=>[n(r,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAc5JREFUSEvtlk1LVVEYhZ+VgZEWFpE0NCJqkoOyhtHHwGnhT/AH1KwGFdWgaCA17yeIDsVAo2Efk5ooEeIs1MKIgoJqdV7YV/bdnnOvCEEDz/Dc9b5rv3vvu54j/vGjuv62zwJXgBPAfmBXwzoMfAHeA5OS3pS6TQa27wG3gB+pMBr8aTAI4wPAcaAXuC/pdq5tM7B9BngNPK1Wdk3S963soO191aQTwDhwTtKrVl1p8DAaA4ckfWuJbB8GThZmi5JWMk0f8Al4LOlmk8EUcEzSqbyZ7XgfZ5I/05KuFrq3wJKkDW05wXy1jz2SzheFg+nA89cLklYL3Qvgl6RLTRM8jx8kXdjK3pca25vqywl2DHa2qPPd+r9vke3TVQDeSDM8khSZ1fZsewLbByMCgFb49QNHJX0u/sldb9EcsLsmKkarlJwBIgIiuqPRqKTZmqj4LeliU1RMp5UNF4VH0gTLQEBmKOk+Frp3wIc8BMuoeJDFdRsLbF+uYupuotsdSc+K5sGEtRTXrbOiNAhUvkzAuZ4zodMFtb23ItuTBJyRHJ2dkPkzIXO9CzIHEjL3dEVmRqdA51gqjAa1HwfJ+CuwCASANlBZe8jbYUC3mr9G0u0ZaeOSGQAAAABJRU5ErkJggg==",style:{width:"24px",height:"24px"}}),n(a,null,{default:s((()=>[u("手机号")])),_:1})])),_:1}),n(d,{style:{display:"flex","align-items":"center","border-bottom":"1px solid #999999"}},{default:s((()=>[n(a,null,{default:s((()=>[u("+86")])),_:1}),n(i,{type:"text",placeholder:"请输入手机号",modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value=e),class:"phone-input"},null,8,["modelValue"])])),_:1}),n(d,{style:{display:"flex","align-items":"center",gap:"5px"}},{default:s((()=>[n(r,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAldJREFUSEu1lkuojWEUhp8XAwqZECPXRLlEuRQTUsQEB0ciZEDJ7JQiMyOFKAaS6ymXkFtJykyIgUiRXAaUDFzOhJDXv/Lt097//vft7Kz6R9/63nddvvWuX/xnUzP4tmcC64BpgIFnwHlJjxvdr0lgeziwHtiUgH8ATxLgdGAQ8Bw4BXRL+lhEVkVgexawG1gGDAAeACeBi5K+BojtocCaRD4P+A3czvz3Sgr/XqsgsL0YuA58Bk4HsKSX9cpge0IiikxHZuXrkHStdKeXwPbAzPEd8AFYKOlbo/qWn9seDNwBxmeBjZb0Pc7LCRYlhyWSIt2WzfYC4C6wVNKtPEFnvIzsm9SoLLWYbY8F3gAbJZ1pi8B2BNRTijQ1f0wG/jZ6Iil6WFGipjOwvQ04ChyRtKOUke32CcrAb2RzsFrSz7YIbO8BpgIbgM0p8irwPpfIdkjE2TS1U4BC8D4TpIsR+XHgZr4suVmo24MY/QvZN1nSi/xTtD0xnqCkkIVCS1P9KsopqTv/imYDD0M1JZ1recr+adTKrF+XgfmS7uUJ+gGhOz3AXEm/WiGx3T8J44iQi1KmebFbnknzFSDEKoalKT2yPQQ4AaxKPbpUJXZlb3k7cAB4D6yV9KiBms4IKc/2QjS4S9Khcv/ChWN7TtKlUcBO4LCk2GQVZjuC2Q98Ajol3c/71Ntow1LaK4CrwFZJARTNjDqHVHSkuQhx+1KUad2dbDvOQ2v2Jd2KXfwnrdDA2wUcLMquZg+KorA9DtiSbbtY/mFPgWOSXjd6aU39VTQCqXf+FwE0CShvyL4FAAAAAElFTkSuQmCC",style:{width:"24px",height:"24px"}}),n(a,null,{default:s((()=>[u("验证码")])),_:1})])),_:1}),n(d,{class:"code-group",style:{"border-bottom":"1px solid #999999"}},{default:s((()=>[n(i,{type:"text",placeholder:"请输入验证码",modelValue:k.value,"onUpdate:modelValue":l[1]||(l[1]=e=>k.value=e),class:"code-input"},null,8,["modelValue"]),n(d,{onClick:E,disabled:K.value,class:"code-button"},{default:s((()=>[u(c(K.value?`${x.value}秒`:"获取"),1)])),_:1},8,["disabled"])])),_:1})])),_:1}),n(w,{onClick:C,class:"login-button"},{default:s((()=>[u("登录")])),_:1})])),_:1})}}},[["__scopeId","data-v-9f08c26b"]]);export{h as default};
