import{r as e,o as l,s as a,w as t,c as s,a as o,i as A,b as u,d as n,e as r,f as c,n as d,t as i,g,h as p,j as v,k as m,I as b,l as w,m as f}from"./index-CplmrVOw.js";import{_ as k,l as S,s as h}from"./_plugin-vue_export-helper.B6xmZzhv.js";const x=k({__name:"login",setup(k){const x=e(""),E=e(""),I=e(!1),K=e(60);let y=null;const B=(e,l="none")=>{f({title:e,icon:l})},C=async()=>{if(!/^[1][3-9][0-9]{9}$/.test(x.value))return B("手机号格式不正确");g({title:"发送中..."});try{await h(x.value),I.value=!0,F(),B("验证码发送成功","success")}catch(e){B("发送验证码失败，请重试","error"),console.error("发送验证码错误:",e)}finally{p()}},F=()=>{K.value=60,clearInterval(y),y=setInterval((()=>{K.value>0?K.value--:(clearInterval(y),I.value=!1)}),1e3)},X=async()=>{if(!E.value)return B("请输入验证码");g({title:"登录中..."});try{const e=await S({mobile:x.value,captcha:E.value});e&&(localStorage.setItem("token",e),localStorage.setItem("mobile",x.value),B("登录成功","success"),a({url:"/pages/index/index"}))}catch(e){B("登录失败，请重试","error"),console.error("登录错误:",e)}finally{p()}};return l((()=>{const e=function(e){const l=window.location.href;console.log(l);const a=l.match(new RegExp(`[?&]${e}=([^&#]*)|(?:#|/).*?[?&]${e}=([^&#]*)`));return a?a[1]||a[2]:null}("param");console.log(e),e&&localStorage.setItem("param",e);localStorage.getItem("token")&&a({url:"/pages/index/index"})})),t(I,(e=>{e||clearInterval(y)})),(e,l)=>{const a=v,t=m,g=A,p=b,f=w;return u(),s(g,{class:"login-container"},{default:o((()=>[n(a,{style:{"font-size":"30px",padding:"186px 0px 52px","font-weight":"bold"}},{default:o((()=>[r("登录")])),_:1}),n(g,{class:"input-group"},{default:o((()=>[n(g,{style:{display:"flex","align-items":"center",gap:"5px"}},{default:o((()=>[n(t,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAc5JREFUSEvtlk1LVVEYhZ+VgZEWFpE0NCJqkoOyhtHHwGnhT/AH1KwGFdWgaCA17yeIDsVAo2Efk5ooEeIs1MKIgoJqdV7YV/bdnnOvCEEDz/Dc9b5rv3vvu54j/vGjuv62zwJXgBPAfmBXwzoMfAHeA5OS3pS6TQa27wG3gB+pMBr8aTAI4wPAcaAXuC/pdq5tM7B9BngNPK1Wdk3S963soO191aQTwDhwTtKrVl1p8DAaA4ckfWuJbB8GThZmi5JWMk0f8Al4LOlmk8EUcEzSqbyZ7XgfZ5I/05KuFrq3wJKkDW05wXy1jz2SzheFg+nA89cLklYL3Qvgl6RLTRM8jx8kXdjK3pca25vqywl2DHa2qPPd+r9vke3TVQDeSDM8khSZ1fZsewLbByMCgFb49QNHJX0u/sldb9EcsLsmKkarlJwBIgIiuqPRqKTZmqj4LeliU1RMp5UNF4VH0gTLQEBmKOk+Frp3wIc8BMuoeJDFdRsLbF+uYupuotsdSc+K5sGEtRTXrbOiNAhUvkzAuZ4zodMFtb23ItuTBJyRHJ2dkPkzIXO9CzIHEjL3dEVmRqdA51gqjAa1HwfJ+CuwCASANlBZe8jbYUC3mr9G0u0ZaeOSGQAAAABJRU5ErkJggg==",style:{width:"24px",height:"24px"}}),n(a,null,{default:o((()=>[r("手机号")])),_:1})])),_:1}),n(g,{style:{display:"flex","align-items":"center","border-bottom":"1px solid #999999"}},{default:o((()=>[n(a,null,{default:o((()=>[r("+86")])),_:1}),n(p,{type:"text",placeholder:"请输入手机号",modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value=e),class:"phone-input"},null,8,["modelValue"])])),_:1}),n(g,{style:{display:"flex","align-items":"center",gap:"5px"}},{default:o((()=>[n(t,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAldJREFUSEu1lkuojWEUhp8XAwqZECPXRLlEuRQTUsQEB0ciZEDJ7JQiMyOFKAaS6ymXkFtJykyIgUiRXAaUDFzOhJDXv/Lt097//vft7Kz6R9/63nddvvWuX/xnUzP4tmcC64BpgIFnwHlJjxvdr0lgeziwHtiUgH8ATxLgdGAQ8Bw4BXRL+lhEVkVgexawG1gGDAAeACeBi5K+BojtocCaRD4P+A3czvz3Sgr/XqsgsL0YuA58Bk4HsKSX9cpge0IiikxHZuXrkHStdKeXwPbAzPEd8AFYKOlbo/qWn9seDNwBxmeBjZb0Pc7LCRYlhyWSIt2WzfYC4C6wVNKtPEFnvIzsm9SoLLWYbY8F3gAbJZ1pi8B2BNRTijQ1f0wG/jZ6Iil6WFGipjOwvQ04ChyRtKOUke32CcrAb2RzsFrSz7YIbO8BpgIbgM0p8irwPpfIdkjE2TS1U4BC8D4TpIsR+XHgZr4suVmo24MY/QvZN1nSi/xTtD0xnqCkkIVCS1P9KsopqTv/imYDD0M1JZ1recr+adTKrF+XgfmS7uUJ+gGhOz3AXEm/WiGx3T8J44iQi1KmebFbnknzFSDEKoalKT2yPQQ4AaxKPbpUJXZlb3k7cAB4D6yV9KiBms4IKc/2QjS4S9Khcv/ChWN7TtKlUcBO4LCk2GQVZjuC2Q98Ajol3c/71Ntow1LaK4CrwFZJARTNjDqHVHSkuQhx+1KUad2dbDvOQ2v2Jd2KXfwnrdDA2wUcLMquZg+KorA9DtiSbbtY/mFPgWOSXjd6aU39VTQCqXf+FwE0CShvyL4FAAAAAElFTkSuQmCC",style:{width:"24px",height:"24px"}}),n(a,null,{default:o((()=>[r("验证码")])),_:1})])),_:1}),n(g,{class:"code-group",style:{"border-bottom":"1px solid #999999"}},{default:o((()=>[n(p,{type:"text",placeholder:"请输入验证码",modelValue:E.value,"onUpdate:modelValue":l[1]||(l[1]=e=>E.value=e),class:"code-input"},null,8,["modelValue"]),n(g,{onClick:c(C,["stop"]),disabled:I.value,class:d({"code-button":!0,"disabled-button":I.value})},{default:o((()=>[r(i(I.value?`${K.value}秒`:"获取"),1)])),_:1},8,["disabled","class"])])),_:1})])),_:1}),n(f,{onClick:X,class:"login-button"},{default:o((()=>[r("登录")])),_:1})])),_:1})}}},[["__scopeId","data-v-abc80993"]]);export{x as default};
